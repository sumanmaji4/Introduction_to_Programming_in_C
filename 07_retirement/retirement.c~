#include <stdio.h>
#include <stdlid.h>

struct retire_info{
  int months;
  double contibution;
  double r_o_r;
};

typedef retire_info r_info;

double next_balence(double balence, r_info ri){
  return balance * (1+ri.r_o_r)+ri.contribution;
}

void calc_year_month(int months,int *year, int *month){
  *year=month/12;
  *month=months%12;
}

void print_balance_info(int months, double balance){
  int age, month;
  cal_year_month(months,&age , &month);
  print("Age %3d month %2d you have $%2lf\n",age,month,balance);
}

void retirement (int startAge, double initial, r_info working , r_info retired){
  int m;
  int age_months=startAge;
  double balance = initial;

  for(m=0;m<working.months;m++){
    print_balance_info(age_months,balance);
    age_months++;
    balance=next_balance(balance,working);
  }

  for(m=0;m<retired.months;m++){
    print_balance_info(age_months,balance);
    age_months++;
    balance=next_balance(balance,retired);
  }
}

int main(void)
{

  r_info working ={
    489,1000.0, 0.045/12
  };
  r_info retired ={
    384, -4000.0, 0.01/12
  };

  int start_age_months=327;
  double savings=21345;

  retirement (start_age_months, savings, working, retired);

  return EXIT_SUCCESS;
  
}
